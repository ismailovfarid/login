<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="../style.css">
    <title>Login</title>
</head>
<body>
    <header class="text-light">
        Quick Answer
    </header>
    <main class="d-flex justify-content-center">
        <section  class="text-light">
            <h1 class="text-center text-light">Login</h1>
            <form>
                <div class="form-row">
                        <div class="form-group">
                                <label for="email" class="text-light">Email</label>
                                <input type="email" class="form-control " name="email" id="email" min="3" max="15">
                        </div>
                        <div class="form-group col">
                                <label for="password" class="text-light">Password</label>
                                <input type="password" class="form-control" name="password" id="password" min="3" max="15">
                            </div>
                </div>
                <div class="container">
                    <div class="row">
                        <button type="submit" class="btn btn-outline-light col-lg-4"  id="sign-up-btn">Sign Up</button>
                        <button class="btn btn-outline-light offset-lg-3 col-lg-5" id="login-btn">Login</button>
                    </div>
                </div>

            </form>
        </section>
    </main>
    <footer class="text-light">
        &copy; Farid Ismailov 2019
    </footer>
    <script>
        let sign_up_btn = document.getElementById('sign-up-btn');
        let login_btn = document.getElementById('login-btn');

        //user login input tags
        let email_input = document.getElementById('email');
        let pwd_input = document.getElementById('password');


        let href_arr = window.location.href.split('/');
        for (let index = 0; index < 3; index++) {
            href_arr.pop();
        }

        // add function for buttons click event
        sign_up_btn.addEventListener('click',function(event){
            event.preventDefault();
            href_arr.push('index.html');
            window.location.href = href_arr.join('/');
        })
        login_btn.addEventListener('click', function(event){
            event.preventDefault();
            const email = email_input.value;
            const pwd = pwd_input.value;

            if(email && pwd){
                let all_users = JSON.parse(localStorage.getItem('users'));
                let auth = false;
                all_users.forEach(user => {
                if(user.email === email && user.password === pwd){
                   auth = true;
                }
                });
               if(auth){
                href_arr.push('src','pages','questions.html');
                window.location.href = href_arr.join('/');
               }else{
                alert('Your password or email is incorrect')
               }
            }else{
                alert('Please fill all fields and try again.');
            }
        })
    </script>
</body>
</html>